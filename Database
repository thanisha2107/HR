CREATE TABLE departments (
    department_id SERIAL PRIMARY KEY,
    department_name VARCHAR(100) UNIQUE NOT NULL
);

CREATE TABLE positions (
    position_id SERIAL PRIMARY KEY,
    position_title VARCHAR(100) UNIQUE NOT NULL,
    salary_band VARCHAR(50)
);

CREATE TABLE employees (
    employee_id SERIAL PRIMARY KEY,
    first_name VARCHAR(50) NOT NULL,
    last_name VARCHAR(50) NOT NULL,
    email VARCHAR(100) UNIQUE NOT NULL,
    phone_number VARCHAR(20),
    hire_date DATE NOT NULL,
    department_id INTEGER REFERENCES departments(department_id),
    position_id INTEGER REFERENCES positions(position_id)
);

CREATE TABLE projects (
    project_id SERIAL PRIMARY KEY,
    project_name VARCHAR(100) UNIQUE NOT NULL,
    start_date DATE NOT NULL,
    end_date DATE
);

CREATE TABLE employee_projects (
    employee_id INTEGER REFERENCES employees(employee_id) ON DELETE CASCADE,
    project_id INTEGER REFERENCES projects(project_id) ON DELETE CASCADE,
    PRIMARY KEY (employee_id, project_id)
);

INSERT INTO departments (department_name) VALUES
('Engineering'),
('Marketing'),
('Human Resources'),
('Sales');

INSERT INTO positions (position_title, salary_band) VALUES
('Software Engineer', 'Band 5'),
('Product Manager', 'Band 7'),
('HR Specialist', 'Band 6'),
('Sales Associate', 'Band 4');

INSERT INTO employees (first_name, last_name, email, hire_date, department_id, position_id) VALUES
('Jane', 'Doe', 'jane.doe@example.com', '2022-01-15', 1, 1),
('John', 'Smith', 'john.smith@example.com', '2021-03-10', 2, 2),
('Emily', 'Jones', 'emily.jones@example.com', '2023-05-20', 1, 1);

INSERT INTO projects (project_name, start_date, end_date) VALUES
('Project Alpha', '2023-01-01', '2023-12-31'),
('Project Beta', '2023-06-01', NULL);

INSERT INTO employee_projects (employee_id, project_id) VALUES
(1, 1),
(1, 2),
(2, 1);
